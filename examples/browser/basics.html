<!DOCTYPE html>
<html>
<head>
  <title>Pryv Javascript Lib | Basics</title>
  <script src="../../dist/pryv.js"></script>

</head>
<body>
<h1>Access Infos</h1>
<textarea id='accessInfo' rows=10 cols=100></textarea>
  <h1>Streams</h1>
  <textarea id='streams' rows=20 cols=100></textarea>
    <h1>Events</h1>
    <textarea id='events' rows=20 cols=100></textarea>

      <script type='text/javascript'>
        // selectors
        var $accessInfo = document.getElementById('accessInfo');
        var $streams = document.getElementById('streams');
        var $events = document.getElementById('events');

        // load Pryv
        var Pryv = require('pryv');
        // .useStaging() only when debug / dev
        var api = new Pryv.Connection('perkikiki', 'TTZycvBTiq', {staging: true});

        api.accessInfo(function(error, infos) {
          $accessInfo.value = JSON.stringify(infos, null, 2);
        });


        api.streams.get(null, function(error, streams) {
          // streams contains an array of streams
          var textualStreams = api.streams.getDisplayTree(streams); //get a printable version
          $streams.value = JSON.stringify(textualStreams, null, 2);
        });


        var filter = new Pryv.Filter({limit : 20});
        api.events.get(filter, function(error, events) {
          var rawEvents = [];
          for (var i = 0; i < events.length; i++) {
            rawEvents.push(events[i].getData()); // get the Event with no circular reference
          }
          $events.value = JSON.stringify(rawEvents, null, 2);
        });


      </script>
</body>
</html>